2017-11-01 19:06:34,366 - bot.py - 31 - [INFO] bot start..
2017-11-01 19:07:17,172 - netease.py - 74 - [INFO] response_playlist: playlist_id=718304476
2017-11-01 19:07:23,985 - dispatcher.py - 280 - [WARNING] A TelegramError was raised while processing the Update
2017-11-01 19:07:23,985 - bot.py - 25 - [WARNING] Update "{'update_id': 807506811, 'message': {'message_id': 341, 'date': 1509534436, 'chat': {'id': 423453012, 'type': 'private', 'username': 'lemosd', 'first_name': 'Lemos', 'last_name': 'Jobs'}, 'text': '分享xfe1234创建的歌单「CHINA（徐梦圆Original Mix）」: http://music.163.com/playlist/718304476/109916495/ (来自@网易云音乐)', 'entities': [{'type': 'url', 'offset': 40, 'length': 50}], 'caption_entities': [], 'photo': [], 'new_chat_members': [], 'new_chat_photo': [], 'delete_chat_photo': False, 'group_chat_created': False, 'supergroup_chat_created': False, 'channel_chat_created': False, 'from': {'id': 423453012, 'first_name': 'Lemos', 'is_bot': False, 'last_name': 'Jobs', 'username': 'lemosd', 'language_code': 'en-US'}, 'new_chat_member': None}, '_effective_message': {'message_id': 341, 'date': 1509534436, 'chat': {'id': 423453012, 'type': 'private', 'username': 'lemosd', 'first_name': 'Lemos', 'last_name': 'Jobs'}, 'text': '分享xfe1234创建的歌单「CHINA（徐梦圆Original Mix）」: http://music.163.com/playlist/718304476/109916495/ (来自@网易云音乐)', 'entities': [{'type': 'url', 'offset': 40, 'length': 50}], 'caption_entities': [], 'photo': [], 'new_chat_members': [], 'new_chat_photo': [], 'delete_chat_photo': False, 'group_chat_created': False, 'supergroup_chat_created': False, 'channel_chat_created': False, 'from': {'id': 423453012, 'first_name': 'Lemos', 'is_bot': False, 'last_name': 'Jobs', 'username': 'lemosd', 'language_code': 'en-US'}, 'new_chat_member': None}}" caused error "Message can't be edited"
2017-11-01 19:09:11,148 - updater.py - 453 - [WARNING] Exiting immediately!
2017-11-01 19:09:12,633 - bot.py - 31 - [INFO] bot start..
2017-11-01 19:09:17,642 - connectionpool.py - 690 - [WARNING] Retrying (Retry(total=2, connect=None, read=None, redirect=None)) after connection broken by 'ProxyError('Cannot connect to proxy.', timeout('timed out',))': /bot425909661:AAHC_a9-htfYsjaZuKfP6jjcl8n2sjizctg/setWebhook
2017-11-01 19:09:22,649 - connectionpool.py - 690 - [WARNING] Retrying (Retry(total=1, connect=None, read=None, redirect=None)) after connection broken by 'ProxyError('Cannot connect to proxy.', timeout('timed out',))': /bot425909661:AAHC_a9-htfYsjaZuKfP6jjcl8n2sjizctg/setWebhook
2017-11-01 19:09:27,656 - connectionpool.py - 690 - [WARNING] Retrying (Retry(total=0, connect=None, read=None, redirect=None)) after connection broken by 'ProxyError('Cannot connect to proxy.', timeout('timed out',))': /bot425909661:AAHC_a9-htfYsjaZuKfP6jjcl8n2sjizctg/setWebhook
2017-11-01 19:09:34,761 - updater.py - 397 - [ERROR] error in bootstrap phase; try=0 max_retries=0
Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/connectionpool.py", line 611, in urlopen
    self._prepare_proxy(conn)
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/connectionpool.py", line 827, in _prepare_proxy
    conn.connect()
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/connection.py", line 326, in connect
    ssl_context=context)
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/util/ssl_.py", line 324, in ssl_wrap_socket
    return context.wrap_socket(sock, server_hostname=server_hostname)
  File "/usr/lib/python3.6/ssl.py", line 401, in wrap_socket
    _context=self, _session=session)
  File "/usr/lib/python3.6/ssl.py", line 808, in __init__
    self.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 1061, in do_handshake
    self._sslobj.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 683, in do_handshake
    self._sslobj.do_handshake()
socket.timeout: _ssl.c:732: The handshake operation timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/telegram/utils/request.py", line 190, in _request_wrapper
    resp = self._con_pool.request(*args, **kwargs)
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/request.py", line 70, in request
    **urlopen_kw)
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/request.py", line 148, in request_encode_body
    return self.urlopen(method, url, **extra_kw)
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/poolmanager.py", line 359, in urlopen
    return super(ProxyManager, self).urlopen(method, url, redirect=redirect, **kw)
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/poolmanager.py", line 244, in urlopen
    response = conn.urlopen(method, u.request_uri, **kw)
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/connectionpool.py", line 695, in urlopen
    **response_kw)
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/connectionpool.py", line 695, in urlopen
    **response_kw)
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/connectionpool.py", line 695, in urlopen
    **response_kw)
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/connectionpool.py", line 666, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/util/retry.py", line 376, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
telegram.vendor.ptb_urllib3.urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='api.telegram.org', port=443): Max retries exceeded with url: /bot425909661:AAHC_a9-htfYsjaZuKfP6jjcl8n2sjizctg/setWebhook (Caused by ProxyError('Cannot connect to proxy.', timeout('_ssl.c:732: The handshake operation timed out',)))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/telegram/ext/updater.py", line 387, in _bootstrap
    url=webhook_url, certificate=cert, allowed_updates=allowed_updates)
  File "/usr/lib/python3.6/site-packages/telegram/bot.py", line 57, in decorator
    result = func(self, *args, **kwargs)
  File "/usr/lib/python3.6/site-packages/telegram/bot.py", line 1765, in set_webhook
    result = self._request.post(url_, data, timeout=timeout)
  File "/usr/lib/python3.6/site-packages/telegram/utils/request.py", line 272, in post
    **urlopen_kwargs)
  File "/usr/lib/python3.6/site-packages/telegram/utils/request.py", line 196, in _request_wrapper
    raise NetworkError('urllib3 HTTPError {0}'.format(error))
telegram.error.NetworkError: urllib3 HTTPError HTTPSConnectionPool(host='api.telegram.org', port=443): Max retries exceeded with url: /bot425909661:AAHC_a9-htfYsjaZuKfP6jjcl8n2sjizctg/setWebhook (Caused by ProxyError('Cannot connect to proxy.', timeout('_ssl.c:732: The handshake operation timed out',)))
2017-11-01 19:09:34,788 - updater.py - 152 - [ERROR] unhandled exception
Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/connectionpool.py", line 611, in urlopen
    self._prepare_proxy(conn)
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/connectionpool.py", line 827, in _prepare_proxy
    conn.connect()
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/connection.py", line 326, in connect
    ssl_context=context)
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/util/ssl_.py", line 324, in ssl_wrap_socket
    return context.wrap_socket(sock, server_hostname=server_hostname)
  File "/usr/lib/python3.6/ssl.py", line 401, in wrap_socket
    _context=self, _session=session)
  File "/usr/lib/python3.6/ssl.py", line 808, in __init__
    self.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 1061, in do_handshake
    self._sslobj.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 683, in do_handshake
    self._sslobj.do_handshake()
socket.timeout: _ssl.c:732: The handshake operation timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/telegram/utils/request.py", line 190, in _request_wrapper
    resp = self._con_pool.request(*args, **kwargs)
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/request.py", line 70, in request
    **urlopen_kw)
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/request.py", line 148, in request_encode_body
    return self.urlopen(method, url, **extra_kw)
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/poolmanager.py", line 359, in urlopen
    return super(ProxyManager, self).urlopen(method, url, redirect=redirect, **kw)
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/poolmanager.py", line 244, in urlopen
    response = conn.urlopen(method, u.request_uri, **kw)
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/connectionpool.py", line 695, in urlopen
    **response_kw)
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/connectionpool.py", line 695, in urlopen
    **response_kw)
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/connectionpool.py", line 695, in urlopen
    **response_kw)
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/connectionpool.py", line 666, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/usr/lib/python3.6/site-packages/telegram/vendor/ptb_urllib3/urllib3/util/retry.py", line 376, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
telegram.vendor.ptb_urllib3.urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='api.telegram.org', port=443): Max retries exceeded with url: /bot425909661:AAHC_a9-htfYsjaZuKfP6jjcl8n2sjizctg/setWebhook (Caused by ProxyError('Cannot connect to proxy.', timeout('_ssl.c:732: The handshake operation timed out',)))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/telegram/ext/updater.py", line 149, in _thread_wrapper
    target(*args, **kwargs)
  File "/usr/lib/python3.6/site-packages/telegram/ext/updater.py", line 275, in _start_polling
    self._bootstrap(bootstrap_retries, clean=clean, webhook_url='', allowed_updates=None)
  File "/usr/lib/python3.6/site-packages/telegram/ext/updater.py", line 387, in _bootstrap
    url=webhook_url, certificate=cert, allowed_updates=allowed_updates)
  File "/usr/lib/python3.6/site-packages/telegram/bot.py", line 57, in decorator
    result = func(self, *args, **kwargs)
  File "/usr/lib/python3.6/site-packages/telegram/bot.py", line 1765, in set_webhook
    result = self._request.post(url_, data, timeout=timeout)
  File "/usr/lib/python3.6/site-packages/telegram/utils/request.py", line 272, in post
    **urlopen_kwargs)
  File "/usr/lib/python3.6/site-packages/telegram/utils/request.py", line 196, in _request_wrapper
    raise NetworkError('urllib3 HTTPError {0}'.format(error))
telegram.error.NetworkError: urllib3 HTTPError HTTPSConnectionPool(host='api.telegram.org', port=443): Max retries exceeded with url: /bot425909661:AAHC_a9-htfYsjaZuKfP6jjcl8n2sjizctg/setWebhook (Caused by ProxyError('Cannot connect to proxy.', timeout('_ssl.c:732: The handshake operation timed out',)))
2017-11-01 19:09:35,643 - dispatcher.py - 214 - [CRITICAL] stopping due to exception in another thread
2017-11-01 19:09:59,303 - bot.py - 31 - [INFO] bot start..
2017-11-01 19:10:02,385 - netease.py - 74 - [INFO] response_playlist: playlist_id=718304476
2017-11-01 19:10:05,209 - dispatcher.py - 292 - [ERROR] An uncaught error was raised while processing the update
Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/telegram/ext/dispatcher.py", line 270, in process_update
    handler.handle_update(update, self)
  File "/usr/lib/python3.6/site-packages/telegram/ext/regexhandler.py", line 173, in handle_update
    return self.callback(dispatcher.bot, update, **optional_args)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/handler/messages.py", line 39, in response_netease_playlist
    netease.response_playlist(bot, update, playlist_id)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/dispatcher/netease.py", line 79, in response_playlist
    selector_playlist_turning(bot, update, playlist_id, cur_pagecode=1)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/dispatcher/netease.py", line 92, in selector_playlist_turning
    parse_mode=telegram.ParseMode.MARKDOWN)
  File "/usr/lib/python3.6/site-packages/telegram/bot.py", line 57, in decorator
    result = func(self, *args, **kwargs)
  File "/usr/lib/python3.6/site-packages/telegram/bot.py", line 82, in decorator
    result = self._request.post(url, data, timeout=kwargs.get('timeout'))
  File "/usr/lib/python3.6/site-packages/telegram/utils/request.py", line 266, in post
    data = json.dumps(data)
  File "/usr/lib/python3.6/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
  File "/usr/lib/python3.6/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/lib/python3.6/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/usr/lib/python3.6/json/encoder.py", line 180, in default
    o.__class__.__name__)
TypeError: Object of type 'Message' is not JSON serializable
2017-11-01 19:10:05,230 - netease.py - 74 - [INFO] response_playlist: playlist_id=718304476
2017-11-01 19:10:06,218 - dispatcher.py - 292 - [ERROR] An uncaught error was raised while processing the update
Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/telegram/ext/dispatcher.py", line 270, in process_update
    handler.handle_update(update, self)
  File "/usr/lib/python3.6/site-packages/telegram/ext/regexhandler.py", line 173, in handle_update
    return self.callback(dispatcher.bot, update, **optional_args)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/handler/messages.py", line 39, in response_netease_playlist
    netease.response_playlist(bot, update, playlist_id)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/dispatcher/netease.py", line 79, in response_playlist
    selector_playlist_turning(bot, update, playlist_id, cur_pagecode=1)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/dispatcher/netease.py", line 92, in selector_playlist_turning
    parse_mode=telegram.ParseMode.MARKDOWN)
  File "/usr/lib/python3.6/site-packages/telegram/bot.py", line 57, in decorator
    result = func(self, *args, **kwargs)
  File "/usr/lib/python3.6/site-packages/telegram/bot.py", line 82, in decorator
    result = self._request.post(url, data, timeout=kwargs.get('timeout'))
  File "/usr/lib/python3.6/site-packages/telegram/utils/request.py", line 266, in post
    data = json.dumps(data)
  File "/usr/lib/python3.6/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
  File "/usr/lib/python3.6/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/lib/python3.6/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/usr/lib/python3.6/json/encoder.py", line 180, in default
    o.__class__.__name__)
TypeError: Object of type 'Message' is not JSON serializable
2017-11-01 19:10:43,723 - updater.py - 453 - [WARNING] Exiting immediately!
2017-11-01 19:10:44,872 - bot.py - 31 - [INFO] bot start..
2017-11-01 19:10:48,466 - netease.py - 74 - [INFO] response_playlist: playlist_id=718304476
2017-11-01 19:10:55,183 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:718304476:D1
2017-11-01 19:10:55,468 - dispatcher.py - 292 - [ERROR] An uncaught error was raised while processing the update
Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/telegram/ext/dispatcher.py", line 270, in process_update
    handler.handle_update(update, self)
  File "/usr/lib/python3.6/site-packages/telegram/ext/callbackqueryhandler.py", line 143, in handle_update
    return self.callback(dispatcher.bot, update, **optional_args)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/handler/listeners.py", line 11, in music_selector_callback
    netease.listen_selector_reply(bot, update)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/dispatcher/netease.py", line 59, in listen_selector_reply
    selector_playlist_turning(bot, query, playlist_id, page_code)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/dispatcher/netease.py", line 86, in selector_playlist_turning
    playlist_selector = netease_generate.produce_playlist_selector(playlist_dict['playlist'])
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/operate/netease_generate.py", line 119, in produce_playlist_selector
    return PlayListSelector(playlist['id'], playlist['name'], playlist['creator']['nickname'],
TypeError: 'NoneType' object is not subscriptable
2017-11-01 19:15:38,633 - updater.py - 453 - [WARNING] Exiting immediately!
2017-11-01 19:15:40,084 - bot.py - 31 - [INFO] bot start..
2017-11-01 19:15:45,100 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:*
2017-11-01 19:15:55,799 - netease.py - 75 - [INFO] response_playlist: playlist_id=718304476
2017-11-01 19:16:01,020 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:P409654855
2017-11-01 19:16:01,020 - netease_selector.py - 104 - [INFO] selector_download_music: music_id=netease:P409654855
2017-11-01 19:16:02,298 - dispatcher.py - 292 - [ERROR] An uncaught error was raised while processing the update
Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/telegram/ext/dispatcher.py", line 270, in process_update
    handler.handle_update(update, self)
  File "/usr/lib/python3.6/site-packages/telegram/ext/callbackqueryhandler.py", line 143, in handle_update
    return self.callback(dispatcher.bot, update, **optional_args)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/handler/listeners.py", line 11, in music_selector_callback
    netease.listen_selector_reply(bot, update)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/dispatcher/netease.py", line 67, in listen_selector_reply
    netease_selector.selector_send_music(bot, query, music_id, False)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/operate/netease_selector.py", line 111, in selector_send_music
    music_obj = netease_generate.generate_music_obj(netease_api.get_music_detail_by_musicid(music_id)['songs'][0],
IndexError: list index out of range
2017-11-01 19:16:02,874 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:718304476:D1
2017-11-01 19:16:25,803 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:P409654860
2017-11-01 19:16:25,803 - netease_selector.py - 104 - [INFO] selector_download_music: music_id=netease:P409654860
2017-11-01 19:16:26,952 - dispatcher.py - 292 - [ERROR] An uncaught error was raised while processing the update
Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/telegram/ext/dispatcher.py", line 270, in process_update
    handler.handle_update(update, self)
  File "/usr/lib/python3.6/site-packages/telegram/ext/callbackqueryhandler.py", line 143, in handle_update
    return self.callback(dispatcher.bot, update, **optional_args)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/handler/listeners.py", line 11, in music_selector_callback
    netease.listen_selector_reply(bot, update)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/dispatcher/netease.py", line 67, in listen_selector_reply
    netease_selector.selector_send_music(bot, query, music_id, False)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/operate/netease_selector.py", line 111, in selector_send_music
    music_obj = netease_generate.generate_music_obj(netease_api.get_music_detail_by_musicid(music_id)['songs'][0],
IndexError: list index out of range
2017-11-01 19:18:37,440 - updater.py - 453 - [WARNING] Exiting immediately!
2017-11-01 19:19:09,200 - bot.py - 31 - [INFO] bot start..
2017-11-01 19:19:14,207 - connectionpool.py - 690 - [WARNING] Retrying (Retry(total=2, connect=None, read=None, redirect=None)) after connection broken by 'ProxyError('Cannot connect to proxy.', timeout('timed out',))': /bot425909661:AAHC_a9-htfYsjaZuKfP6jjcl8n2sjizctg/setWebhook
2017-11-01 19:19:21,793 - connectionpool.py - 690 - [WARNING] Retrying (Retry(total=1, connect=None, read=None, redirect=None)) after connection broken by 'ProxyError('Cannot connect to proxy.', timeout('_ssl.c:732: The handshake operation timed out',))': /bot425909661:AAHC_a9-htfYsjaZuKfP6jjcl8n2sjizctg/setWebhook
2017-11-01 19:19:26,774 - updater.py - 453 - [WARNING] Exiting immediately!
2017-11-01 19:19:28,683 - bot.py - 31 - [INFO] bot start..
2017-11-01 19:19:33,690 - connectionpool.py - 690 - [WARNING] Retrying (Retry(total=2, connect=None, read=None, redirect=None)) after connection broken by 'ProxyError('Cannot connect to proxy.', timeout('timed out',))': /bot425909661:AAHC_a9-htfYsjaZuKfP6jjcl8n2sjizctg/setWebhook
2017-11-01 19:19:45,092 - netease.py - 75 - [INFO] response_playlist: playlist_id=718304476
2017-11-01 19:19:51,340 - netease.py - 75 - [INFO] response_playlist: playlist_id=718304476
2017-11-01 19:19:55,353 - messages.py - 14 - [INFO] hi: Hi, Lemos
2017-11-01 19:20:02,074 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:718304476:D1
2017-11-01 19:20:13,757 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:P409654859
2017-11-01 19:20:13,757 - netease_selector.py - 104 - [INFO] selector_download_music: music_id=netease:P409654859
2017-11-01 19:20:15,618 - dispatcher.py - 292 - [ERROR] An uncaught error was raised while processing the update
Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/telegram/ext/dispatcher.py", line 270, in process_update
    handler.handle_update(update, self)
  File "/usr/lib/python3.6/site-packages/telegram/ext/callbackqueryhandler.py", line 143, in handle_update
    return self.callback(dispatcher.bot, update, **optional_args)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/handler/listeners.py", line 11, in music_selector_callback
    netease.listen_selector_reply(bot, update)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/dispatcher/netease.py", line 67, in listen_selector_reply
    netease_selector.selector_send_music(bot, query, music_id, False)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/operate/netease_selector.py", line 111, in selector_send_music
    music_obj = netease_generate.generate_music_obj(netease_api.get_music_detail_by_musicid(music_id)['songs'][0],
IndexError: list index out of range
2017-11-01 19:22:22,280 - updater.py - 453 - [WARNING] Exiting immediately!
2017-11-01 19:22:23,552 - bot.py - 31 - [INFO] bot start..
2017-11-01 19:22:37,743 - netease.py - 75 - [INFO] response_playlist: playlist_id=718304476
2017-11-01 19:22:52,299 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:718304476:D1
2017-11-01 19:22:56,139 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:718304476:U2
2017-11-01 19:22:56,507 - dispatcher.py - 292 - [ERROR] An uncaught error was raised while processing the update
Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/telegram/ext/dispatcher.py", line 270, in process_update
    handler.handle_update(update, self)
  File "/usr/lib/python3.6/site-packages/telegram/ext/callbackqueryhandler.py", line 143, in handle_update
    return self.callback(dispatcher.bot, update, **optional_args)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/handler/listeners.py", line 11, in music_selector_callback
    netease.listen_selector_reply(bot, update)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/dispatcher/netease.py", line 64, in listen_selector_reply
    selector_playlist_turning(bot, query, playlist_id, page_code)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/dispatcher/netease.py", line 87, in selector_playlist_turning
    playlist_selector = netease_generate.produce_playlist_selector(playlist_dict['playlist'])
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/operate/netease_generate.py", line 119, in produce_playlist_selector
    return PlayListSelector(playlist['id'], playlist['name'], playlist['creator']['nickname'],
TypeError: 'NoneType' object is not subscriptable
2017-11-01 19:24:02,914 - updater.py - 453 - [WARNING] Exiting immediately!
2017-11-01 19:24:04,384 - bot.py - 31 - [INFO] bot start..
2017-11-01 19:24:13,579 - netease.py - 75 - [INFO] response_playlist: playlist_id=718304476
2017-11-01 19:25:24,299 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:718304476:D1
2017-11-01 19:25:27,357 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:718304476:U2
2017-11-01 19:25:30,699 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:*
2017-11-01 19:25:43,023 - netease.py - 75 - [INFO] response_playlist: playlist_id=718304476
2017-11-01 19:25:57,273 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:P409654857
2017-11-01 19:25:57,273 - netease_selector.py - 104 - [INFO] selector_download_music: music_id=409654857
2017-11-01 19:26:10,881 - netease_selector.py - 75 - [INFO] 文件：徐梦圆 - China-M.mp3，正在发送中~
2017-11-01 19:26:42,339 - netease.py - 15 - [INFO] get_music: 好看
2017-11-01 19:26:43,125 - netease_generate.py - 42 - [INFO] generate_music_list_selector: keyword=好看, pagecode=1
2017-11-01 19:26:47,981 - netease.py - 15 - [INFO] get_music: 青春
2017-11-01 19:26:48,564 - netease_generate.py - 42 - [INFO] generate_music_list_selector: keyword=青春, pagecode=1
2017-11-01 19:26:49,390 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:*
2017-11-01 19:26:54,877 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:28768327
2017-11-01 19:27:13,433 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:青春:+1
2017-11-01 19:27:16,747 - netease_selector.py - 88 - [INFO] selector_page_turning: keyword: 青春; page_code=2
2017-11-01 19:27:17,260 - netease_generate.py - 42 - [INFO] generate_music_list_selector: keyword=青春, pagecode=2
2017-11-01 19:27:20,789 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:青春:+2
2017-11-01 19:27:21,596 - netease_selector.py - 88 - [INFO] selector_page_turning: keyword: 青春; page_code=3
2017-11-01 19:27:22,072 - netease_generate.py - 42 - [INFO] generate_music_list_selector: keyword=青春, pagecode=3
2017-11-01 19:27:26,700 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:青春:-3
2017-11-01 19:27:27,674 - netease_selector.py - 88 - [INFO] selector_page_turning: keyword: 青; page_code=2
2017-11-01 19:27:28,138 - netease_generate.py - 42 - [INFO] generate_music_list_selector: keyword=青, pagecode=2
2017-11-01 19:28:49,420 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:青:-2
2017-11-01 19:28:50,381 - netease_selector.py - 88 - [INFO] selector_page_turning: keyword: ; page_code=1
2017-11-01 19:28:50,612 - dispatcher.py - 292 - [ERROR] An uncaught error was raised while processing the update
Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/telegram/ext/dispatcher.py", line 270, in process_update
    handler.handle_update(update, self)
  File "/usr/lib/python3.6/site-packages/telegram/ext/callbackqueryhandler.py", line 143, in handle_update
    return self.callback(dispatcher.bot, update, **optional_args)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/handler/listeners.py", line 11, in music_selector_callback
    netease.listen_selector_reply(bot, update)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/dispatcher/netease.py", line 55, in listen_selector_reply
    netease_selector.selector_page_turning(bot, query, kw, page_code)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/operate/netease_selector.py", line 90, in selector_page_turning
KeyError: 'result'
2017-11-01 19:29:03,817 - updater.py - 453 - [WARNING] Exiting immediately!
2017-11-01 19:29:40,144 - bot.py - 31 - [INFO] bot start..
2017-11-01 19:29:52,749 - netease.py - 15 - [INFO] get_music: 青春
2017-11-01 19:29:52,982 - netease_generate.py - 42 - [INFO] generate_music_list_selector: keyword=青春, pagecode=1
2017-11-01 19:29:58,767 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:青春:+1
2017-11-01 19:29:58,768 - netease_selector.py - 84 - [INFO] selector_page_turning: keyword: 青春; page_code=2
2017-11-01 19:29:59,053 - netease_generate.py - 42 - [INFO] generate_music_list_selector: keyword=青春, pagecode=2
2017-11-01 19:30:01,755 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:青春:-2
2017-11-01 19:30:01,755 - netease_selector.py - 84 - [INFO] selector_page_turning: keyword: 青春; page_code=1
2017-11-01 19:30:01,996 - netease_generate.py - 42 - [INFO] generate_music_list_selector: keyword=青春, pagecode=1
2017-11-01 19:30:05,443 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:青春:+1
2017-11-01 19:30:05,443 - netease_selector.py - 84 - [INFO] selector_page_turning: keyword: 青春; page_code=2
2017-11-01 19:30:05,648 - netease_generate.py - 42 - [INFO] generate_music_list_selector: keyword=青春, pagecode=2
2017-11-01 19:30:08,209 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:青春:+2
2017-11-01 19:30:08,209 - netease_selector.py - 84 - [INFO] selector_page_turning: keyword: 青春; page_code=3
2017-11-01 19:30:08,478 - netease_generate.py - 42 - [INFO] generate_music_list_selector: keyword=青春, pagecode=3
2017-11-01 19:30:11,981 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:*
2017-11-01 19:30:17,014 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:青:+2
2017-11-01 19:30:17,015 - netease_selector.py - 84 - [INFO] selector_page_turning: keyword: 青; page_code=3
2017-11-01 19:30:17,449 - netease_generate.py - 42 - [INFO] generate_music_list_selector: keyword=青, pagecode=3
2017-11-01 19:30:42,221 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:青:+3
2017-11-01 19:30:42,221 - netease_selector.py - 84 - [INFO] selector_page_turning: keyword: 青; page_code=4
2017-11-01 19:30:42,589 - netease_generate.py - 42 - [INFO] generate_music_list_selector: keyword=青, pagecode=4
2017-11-01 19:30:46,541 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:22664883
2017-11-01 19:31:15,659 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:22664883
2017-11-01 19:31:57,460 - updater.py - 453 - [WARNING] Exiting immediately!
2017-11-01 19:31:58,796 - bot.py - 31 - [INFO] bot start..
2017-11-01 19:32:04,140 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:P409654859
2017-11-01 19:32:04,141 - netease_selector.py - 100 - [INFO] selector_download_music: music_id=409654859
2017-11-01 19:32:09,942 - updater.py - 453 - [WARNING] Exiting immediately!
2017-11-01 19:32:11,366 - bot.py - 31 - [INFO] bot start..
2017-11-01 19:32:18,717 - netease.py - 15 - [INFO] get_music: 开心
2017-11-01 19:32:19,064 - netease_generate.py - 42 - [INFO] generate_music_list_selector: keyword=开心, pagecode=1
2017-11-01 19:32:22,542 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:95243
2017-11-01 19:32:22,542 - netease_selector.py - 100 - [INFO] selector_download_music: music_id=95243
2017-11-01 19:32:39,021 - netease_selector.py - 75 - [INFO] 文件：胡伟立 - 开心.mp3，正在发送中~
2017-11-01 19:33:02,628 - updater.py - 453 - [WARNING] Exiting immediately!
2017-11-01 20:18:59,697 - bot.py - 31 - [INFO] bot start..
2017-11-01 20:20:12,624 - netease.py - 75 - [INFO] response_playlist: playlist_id=134518450
2017-11-01 20:20:24,772 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:P470790890
2017-11-01 20:20:24,773 - netease_selector.py - 100 - [INFO] selector_download_music: music_id=470790890
2017-11-01 20:20:26,520 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:P22754969
2017-11-01 20:20:26,520 - netease_selector.py - 100 - [INFO] selector_download_music: music_id=22754969
2017-11-01 20:21:05,372 - netease_selector.py - 75 - [INFO] 文件：夏小桐 - 少年弦.mp3，正在发送中..
2017-11-01 20:21:08,776 - netease_selector.py - 75 - [INFO] 文件：鈴木常吉 - 思ひで.mp3，正在发送中..
2017-11-01 20:21:22,658 - connectionpool.py - 690 - [WARNING] Retrying (Retry(total=2, connect=None, read=None, redirect=None)) after connection broken by 'ProxyError('Cannot connect to proxy.', ConnectionResetError(104, 'Connection reset by peer'))': /bot425909661:AAHC_a9-htfYsjaZuKfP6jjcl8n2sjizctg/sendAudio
2017-11-01 20:21:58,055 - netease_selector.py - 132 - [INFO] selector download MV: mvid=376073
2017-11-01 20:22:16,886 - updater.py - 453 - [WARNING] Exiting immediately!
2017-11-01 20:25:05,281 - bot.py - 31 - [INFO] bot start..
2017-11-01 20:25:19,692 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:P22754969
2017-11-01 20:25:19,692 - netease_selector.py - 100 - [INFO] selector_download_music: music_id=22754969
2017-11-01 20:26:01,151 - netease_selector.py - 75 - [INFO] 文件：鈴木常吉 - 思ひで.mp3，>> 正在发送中
2017-11-01 20:26:31,173 - netease_selector.py - 132 - [INFO] selector download MV: mvid=376073
2017-11-01 20:27:56,999 - updater.py - 453 - [WARNING] Exiting immediately!
2017-11-02 00:38:59,241 - bot.py - 31 - [INFO] bot start..
2017-11-02 00:39:09,929 - netease.py - 15 - [INFO] get_music: 网易云
2017-11-02 00:39:10,290 - netease_generate.py - 42 - [INFO] generate_music_list_selector: keyword=网易云, pagecode=1
2017-11-02 00:39:28,518 - netease.py - 75 - [INFO] response_playlist: playlist_id=331624342
2017-11-02 00:39:34,390 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:331624342:D1
2017-11-02 00:39:38,070 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:*
2017-11-02 00:39:42,004 - updater.py - 453 - [WARNING] Exiting immediately!
2017-11-02 01:02:17,962 - bot.py - 31 - [INFO] bot start..
2017-11-02 01:02:27,816 - netease.py - 15 - [INFO] get_music: 开心
2017-11-02 01:02:28,136 - netease_generate.py - 42 - [INFO] generate_music_list_selector: keyword=开心, pagecode=1
2017-11-02 01:02:33,901 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:30413619
2017-11-02 01:02:33,901 - netease_selector.py - 100 - [INFO] selector_download_music: music_id=30413619
2017-11-02 01:03:01,736 - netease.py - 15 - [INFO] get_music: 晴天
2017-11-02 01:03:02,050 - netease_generate.py - 42 - [INFO] generate_music_list_selector: keyword=晴天, pagecode=1
2017-11-02 01:03:07,973 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:186016
2017-11-02 01:03:07,973 - netease_selector.py - 100 - [INFO] selector_download_music: music_id=186016
2017-11-02 01:03:12,103 - netease_selector.py - 75 - [INFO] 文件：徐真真 - 开心就拍手.mp3，>> 正在发送中
2017-11-02 01:03:30,906 - netease_selector.py - 75 - [INFO] 文件：周杰伦 - 晴天.mp3，>> 正在发送中
2017-11-02 01:03:57,564 - netease_selector.py - 132 - [INFO] selector download MV: mvid=504177
2017-11-02 01:07:06,667 - updater.py - 453 - [WARNING] Exiting immediately!
2017-11-02 01:07:08,177 - bot.py - 31 - [INFO] bot start..
2017-11-02 01:07:19,436 - netease.py - 15 - [INFO] get_music: 晴天
2017-11-02 01:07:19,686 - netease_generate.py - 42 - [INFO] generate_music_list_selector: keyword=晴天, pagecode=1
2017-11-02 01:07:22,856 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:186016
2017-11-02 01:07:22,857 - netease_selector.py - 102 - [INFO] selector_download_music: music_id=186016
2017-11-02 01:07:47,180 - netease_selector.py - 77 - [INFO] 文件：周杰伦 - 晴天.mp3，>> 正在发送中
2017-11-02 01:08:26,748 - updater.py - 288 - [ERROR] Error while getting Updates: Timed out
2017-11-02 01:08:26,749 - bot.py - 25 - [WARNING] Update "None" caused error "Timed out"
2017-11-02 01:08:36,047 - connectionpool.py - 690 - [WARNING] Retrying (Retry(total=2, connect=None, read=None, redirect=None)) after connection broken by 'ProxyError('Cannot connect to proxy.', timeout('_ssl.c:732: The handshake operation timed out',))': /bot425909661:AAHC_a9-htfYsjaZuKfP6jjcl8n2sjizctg/getUpdates
2017-11-02 01:09:02,079 - netease_selector.py - 134 - [INFO] selector download MV: mvid=504177
2017-11-02 01:15:16,243 - updater.py - 288 - [ERROR] Error while getting Updates: Timed out
2017-11-02 01:15:16,243 - bot.py - 25 - [WARNING] Update "None" caused error "Timed out"
2017-11-02 01:16:47,591 - updater.py - 288 - [ERROR] Error while getting Updates: Timed out
2017-11-02 01:16:47,592 - bot.py - 25 - [WARNING] Update "None" caused error "Timed out"
2017-11-02 01:26:43,107 - updater.py - 453 - [WARNING] Exiting immediately!
2017-11-02 01:26:44,626 - bot.py - 31 - [INFO] bot start..
2017-11-02 01:26:53,854 - netease.py - 15 - [INFO] get_music: 晴天
2017-11-02 01:26:54,074 - netease_generate.py - 42 - [INFO] generate_music_list_selector: keyword=晴天, pagecode=1
2017-11-02 01:26:57,893 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:186016
2017-11-02 01:26:57,894 - netease_selector.py - 102 - [INFO] selector_download_music: music_id=186016
2017-11-02 01:27:01,481 - promise.py - 45 - [ERROR] An uncaught error was raised while running the promise
Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/usr/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/usr/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/usr/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/usr/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/usr/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f2f81401080>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/requests/adapters.py", line 440, in send
    timeout=timeout
  File "/usr/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/usr/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=80): Max retries exceeded with url: /api/get/song/netease?id=186016&br=320000 (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f2f81401080>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/telegram/utils/promise.py", line 42, in run
    self._result = self.pooled_function(*self.args, **self.kwargs)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/handler/listeners.py", line 12, in music_selector_callback
    netease.listen_selector_reply(bot, update)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/dispatcher/netease.py", line 70, in listen_selector_reply
    netease_selector.selector_send_music(bot, query, music_id, True)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/operate/netease_selector.py", line 117, in selector_send_music
    netease_api.get_music_url_by_musicid(music_id, br)['data'][0])
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/apis/netease_api.py", line 31, in get_music_url_by_musicid
    proxies=application.API_PROXY['liu9293'])
  File "/usr/lib/python3.6/site-packages/requests/api.py", line 72, in get
    return request('get', url, params=params, **kwargs)
  File "/usr/lib/python3.6/site-packages/requests/api.py", line 58, in request
    return session.request(method=method, url=url, **kwargs)
  File "/usr/lib/python3.6/site-packages/requests/sessions.py", line 508, in request
    resp = self.send(prep, **send_kwargs)
  File "/usr/lib/python3.6/site-packages/requests/sessions.py", line 618, in send
    r = adapter.send(request, **kwargs)
  File "/usr/lib/python3.6/site-packages/requests/adapters.py", line 508, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=80): Max retries exceeded with url: /api/get/song/netease?id=186016&br=320000 (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f2f81401080>: Failed to establish a new connection: [Errno 111] Connection refused',))
2017-11-02 01:29:00,447 - updater.py - 453 - [WARNING] Exiting immediately!
2017-11-02 01:29:02,147 - bot.py - 31 - [INFO] bot start..
2017-11-02 01:29:32,091 - netease.py - 15 - [INFO] get_music: 晴天
2017-11-02 01:29:33,072 - netease_generate.py - 42 - [INFO] generate_music_list_selector: keyword=晴天, pagecode=1
2017-11-02 01:29:38,457 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:186016
2017-11-02 01:29:38,458 - netease_selector.py - 102 - [INFO] selector_download_music: music_id=186016
2017-11-02 01:29:43,811 - promise.py - 45 - [ERROR] An uncaught error was raised while running the promise
Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/telegram/utils/promise.py", line 42, in run
    self._result = self.pooled_function(*self.args, **self.kwargs)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/handler/listeners.py", line 12, in music_selector_callback
    netease.listen_selector_reply(bot, update)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/dispatcher/netease.py", line 70, in listen_selector_reply
    netease_selector.selector_send_music(bot, query, music_id, True)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/operate/netease_selector.py", line 117, in selector_send_music
    netease_api.get_music_url_by_musicid(music_id, br)['data'][0])
KeyError: 'data'
2017-11-02 01:29:54,093 - updater.py - 453 - [WARNING] Exiting immediately!
2017-11-02 01:30:41,435 - bot.py - 31 - [INFO] bot start..
2017-11-02 01:30:54,022 - netease.py - 15 - [INFO] get_music: 晴天
2017-11-02 01:30:54,186 - netease_generate.py - 42 - [INFO] generate_music_list_selector: keyword=晴天, pagecode=1
2017-11-02 01:30:57,199 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:186016
2017-11-02 01:30:57,199 - netease_selector.py - 102 - [INFO] selector_download_music: music_id=186016
2017-11-02 01:31:00,291 - promise.py - 45 - [ERROR] An uncaught error was raised while running the promise
Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/usr/lib/python3.6/site-packages/urllib3/util/connection.py", line 83, in create_connection
    raise err
  File "/usr/lib/python3.6/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/urllib3/connectionpool.py", line 601, in urlopen
    chunked=chunked)
  File "/usr/lib/python3.6/site-packages/urllib3/connectionpool.py", line 357, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/usr/lib/python3.6/site-packages/urllib3/connection.py", line 166, in connect
    conn = self._new_conn()
  File "/usr/lib/python3.6/site-packages/urllib3/connection.py", line 150, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7fd8c867a0b8>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/requests/adapters.py", line 440, in send
    timeout=timeout
  File "/usr/lib/python3.6/site-packages/urllib3/connectionpool.py", line 639, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/usr/lib/python3.6/site-packages/urllib3/util/retry.py", line 388, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=80): Max retries exceeded with url: /api/get/song/netease?id=186016&br=320000 (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fd8c867a0b8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/telegram/utils/promise.py", line 42, in run
    self._result = self.pooled_function(*self.args, **self.kwargs)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/handler/listeners.py", line 12, in music_selector_callback
    netease.listen_selector_reply(bot, update)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/dispatcher/netease.py", line 70, in listen_selector_reply
    netease_selector.selector_send_music(bot, query, music_id, True)
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/operate/netease_selector.py", line 117, in selector_send_music
    netease_api.get_music_url_by_musicid(music_id, br)['data'][0])
  File "/home/lg/Documents/Project/PycharmProjects/GeziBot/service/apis/netease_api.py", line 31, in get_music_url_by_musicid
    proxies=application.API_PROXY['liu9293'])
  File "/usr/lib/python3.6/site-packages/requests/api.py", line 72, in get
    return request('get', url, params=params, **kwargs)
  File "/usr/lib/python3.6/site-packages/requests/api.py", line 58, in request
    return session.request(method=method, url=url, **kwargs)
  File "/usr/lib/python3.6/site-packages/requests/sessions.py", line 508, in request
    resp = self.send(prep, **send_kwargs)
  File "/usr/lib/python3.6/site-packages/requests/sessions.py", line 618, in send
    r = adapter.send(request, **kwargs)
  File "/usr/lib/python3.6/site-packages/requests/adapters.py", line 508, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=80): Max retries exceeded with url: /api/get/song/netease?id=186016&br=320000 (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fd8c867a0b8>: Failed to establish a new connection: [Errno 111] Connection refused',))
2017-11-02 01:31:33,530 - updater.py - 453 - [WARNING] Exiting immediately!
2017-11-02 01:33:09,663 - bot.py - 31 - [INFO] bot start..
2017-11-02 01:33:18,383 - netease.py - 15 - [INFO] get_music: 晴天
2017-11-02 01:33:18,635 - netease_generate.py - 42 - [INFO] generate_music_list_selector: keyword=晴天, pagecode=1
2017-11-02 01:33:21,729 - netease.py - 38 - [INFO] listen_selector_reply: data=netease:186016
2017-11-02 01:33:21,729 - netease_selector.py - 102 - [INFO] selector_download_music: music_id=186016
